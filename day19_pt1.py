input = """--- scanner 0 ---
497,-409,-534
-367,419,-378
42,122,52
-639,-583,-417
-698,-415,664
546,-352,400
349,-338,-455
-675,-616,-588
-560,-513,617
-787,546,758
-139,32,-50
-674,-732,-518
427,-359,-463
-437,379,-523
-396,433,-346
436,-321,503
-677,-587,639
399,430,419
564,622,-643
659,463,-650
41,-60,-110
-712,512,618
796,604,-650
-891,535,636
493,437,388
661,-319,468
466,417,330

--- scanner 1 ---
488,862,771
-451,-609,647
-8,100,-127
823,-683,-416
-594,-600,748
514,-416,408
-587,-663,618
440,-467,494
824,-608,-426
824,462,-718
808,427,-939
-555,-682,-773
-421,857,-538
144,47,44
740,422,-884
430,937,816
-424,918,-492
765,-709,-462
-544,768,567
-542,897,-458
515,932,791
-603,731,567
-648,738,582
398,-421,563
-596,-648,-556
-585,-738,-674

--- scanner 2 ---
156,-76,53
-259,485,-910
776,-678,-738
-512,-476,-732
720,685,-769
-483,-471,-705
571,375,493
-237,-560,461
776,-380,490
-268,-528,495
551,288,344
-517,-428,-800
86,36,-138
-258,-611,459
765,-550,-596
-560,617,672
635,610,-870
-422,606,591
799,-559,508
-541,585,524
-301,556,-808
628,391,268
765,-484,368
-264,531,-747
752,-528,-711
690,711,-914

--- scanner 3 ---
680,601,813
-763,-692,-544
-858,-735,-578
381,835,-843
-924,398,806
-790,-687,-573
738,574,833
-840,536,806
432,-783,715
-24,82,-11
-753,518,-651
649,507,820
403,-603,-298
-183,-25,69
-654,-613,704
-769,-635,691
401,-552,-319
-654,493,-664
414,700,-770
437,-635,-329
-796,-485,715
310,-679,704
-762,501,-779
-892,532,715
450,-604,738
394,892,-702

--- scanner 4 ---
-917,624,-692
577,-693,-626
-126,-39,150
-979,-765,601
-678,-570,-622
427,-771,818
-979,-722,753
-506,819,785
547,-706,800
-916,-667,651
-629,-615,-432
489,-736,-793
-60,53,-25
579,-766,930
302,692,-474
293,678,-445
727,348,615
-886,575,-668
-846,525,-744
731,354,641
-691,-686,-521
395,675,-621
677,444,514
-469,871,844
-450,727,834
588,-747,-658

--- scanner 5 ---
707,-636,-426
453,-503,608
638,-682,-384
508,651,279
-692,401,-447
503,716,493
780,503,-853
-482,-739,292
726,410,-771
-493,443,-410
583,-440,601
-574,-747,373
726,639,-762
793,-687,-500
-410,731,632
-750,-597,-454
548,675,386
-35,138,-125
-522,738,695
-411,760,639
80,-52,-99
-842,-620,-385
-650,-574,-392
45,78,61
-533,470,-397
554,-494,465
-467,-777,467

--- scanner 6 ---
417,706,386
624,-878,714
-664,546,469
-510,734,-504
347,593,-482
618,-769,-499
87,28,83
-705,774,-557
-577,748,-698
-690,-641,-472
-631,429,536
-766,-751,-568
399,644,-408
543,-796,-548
-58,-39,-23
601,-739,-445
345,657,505
-752,484,517
-421,-772,904
659,-832,579
315,695,-406
-447,-621,875
-321,-641,912
-815,-692,-550
670,-782,782
330,617,490

--- scanner 7 ---
722,-462,421
490,360,608
750,327,-461
-60,-147,75
800,-441,413
-832,489,304
-859,-837,726
-480,673,-656
713,-424,-545
-833,477,358
-740,-909,677
656,334,-430
353,501,608
64,14,50
-87,-1,-85
-693,475,450
-531,-630,-858
-331,777,-634
-666,-595,-812
488,-422,-510
-529,797,-619
603,-455,-442
652,-512,492
-463,-584,-762
683,314,-372
-755,-924,637
99,-151,-78
585,519,601

--- scanner 8 ---
850,-723,378
823,-782,322
-473,528,-595
-610,567,-696
846,415,653
-583,-246,-701
436,564,-426
488,649,-576
677,-704,302
-518,-342,499
-888,781,495
-605,508,-688
458,-266,-880
-728,755,480
-441,-251,507
27,88,-18
624,-280,-894
-629,-246,-887
-753,-230,-748
454,-316,-836
726,507,647
729,466,756
-806,678,591
-408,-270,518
320,602,-548

--- scanner 9 ---
-350,-833,430
680,-459,-574
685,-320,414
-785,877,750
-705,-352,-680
544,600,798
498,669,840
493,514,724
-860,922,808
-315,745,-652
376,791,-595
752,-547,-601
-419,802,-744
786,-356,473
-586,-408,-679
760,-310,415
777,-395,-625
-855,897,723
-362,780,-639
526,735,-522
-385,-612,414
423,876,-495
9,49,-23
-693,-533,-717
121,145,87
-345,-778,498

--- scanner 10 ---
-705,753,829
-748,567,-641
856,534,510
545,-578,373
-349,-481,-679
581,672,-336
-723,666,-628
-843,837,829
496,-541,497
643,650,-421
671,631,-338
-640,-767,836
601,557,494
717,-754,-638
347,-563,393
814,613,513
-740,675,-756
-406,-468,-820
-667,-825,856
-76,-83,-61
-541,-501,-747
773,-624,-679
-709,805,738
17,83,103
800,-805,-634
-734,-736,843

--- scanner 11 ---
-404,656,-637
606,434,-504
-731,-538,-412
121,-146,-141
-787,-601,367
-635,-465,-538
-380,714,-478
449,398,512
438,562,537
-755,660,503
427,-930,-735
874,-789,676
734,490,-435
-687,-611,321
502,-896,-552
-836,-458,-525
-857,674,597
-849,571,562
791,-889,662
-3,15,-106
-319,700,-528
-765,-553,467
444,-910,-476
690,-746,611
668,468,-355
450,381,465

--- scanner 12 ---
-854,495,-609
782,-496,723
-827,570,-658
-784,-560,551
586,351,-749
-797,553,-712
-799,614,560
-699,-738,-685
595,563,544
632,563,603
676,-558,-653
-818,-777,592
-736,744,553
-809,-814,-589
-750,-863,-607
721,-542,726
716,-753,-600
637,267,-751
761,-462,605
-70,-47,-20
690,-625,-459
-874,-678,562
-745,643,696
602,578,499
535,299,-675

--- scanner 13 ---
-571,812,741
-527,-561,715
-52,135,18
-602,-371,-237
-134,10,131
332,625,588
-588,-540,839
-399,718,-670
-601,-598,879
-534,619,-681
-747,914,744
480,-554,796
-566,630,-627
524,683,-690
570,-651,776
292,547,674
546,-590,855
720,-559,-379
-637,-474,-245
-696,-385,-339
531,-563,-429
508,-617,-383
-718,905,758
268,645,709
659,769,-763
695,621,-707

--- scanner 14 ---
-581,-650,623
729,732,-540
-827,-556,-522
-171,55,-12
-609,-746,758
738,761,-554
534,372,447
449,-318,-710
403,390,572
-677,592,804
-750,543,807
659,-664,459
371,-278,-624
-730,-466,-502
-774,615,-419
-670,-722,681
671,-612,461
692,-809,410
-912,596,862
-766,-532,-443
469,-254,-589
-737,541,-583
-716,602,-459
11,125,42
356,415,487
636,585,-557

--- scanner 15 ---
579,367,484
-272,462,-621
-388,457,-776
-304,-896,-368
774,-697,-602
485,397,591
12,-77,46
-389,-891,-393
713,704,-566
128,-7,-125
-602,-650,550
-280,570,667
865,-402,277
729,-690,-617
577,650,-537
-273,524,859
-342,547,767
670,-727,-617
941,-421,450
921,-343,304
-362,-821,-413
-314,508,-690
720,641,-436
-396,-604,515
404,405,499
-409,-577,560

--- scanner 16 ---
70,-80,-32
736,722,534
-233,652,505
-497,-846,325
-614,-851,-719
-301,485,-722
-714,-789,-742
608,503,-799
-250,631,552
552,576,-949
-656,-796,256
578,735,480
-324,467,-767
-357,537,-690
762,-481,494
829,-743,-832
743,-817,-781
-275,764,420
3,40,-154
467,476,-902
762,-472,265
816,-390,358
-806,-858,-765
674,-859,-827
626,786,556
-457,-833,298

--- scanner 17 ---
-553,-862,494
352,-726,342
-556,371,-665
-168,-87,20
389,558,493
-897,473,590
577,677,-380
-437,-738,-859
650,818,-363
704,789,-356
306,-716,442
641,-890,-686
370,471,428
-814,501,609
-540,-869,293
-899,563,631
-427,-789,398
-601,344,-846
728,-794,-725
594,-837,-721
475,639,429
452,-774,364
-597,427,-795
-595,-661,-881
-448,-762,-846
29,-60,-59

--- scanner 18 ---
534,-475,674
-293,-505,573
502,-498,812
643,412,543
-559,662,-336
-604,680,-359
-636,644,573
627,-598,-611
-739,671,432
668,495,-268
-2,-117,-12
-527,610,-392
-498,-516,-361
719,361,591
815,-627,-632
-401,-591,-444
-348,-490,456
715,516,-285
583,383,-310
-462,-557,-538
697,425,701
500,-486,770
-327,-622,443
666,-590,-574
-786,571,517
150,57,133

--- scanner 19 ---
-586,675,495
18,143,135
-613,-650,605
-779,455,-444
465,434,-417
347,-540,692
509,-299,-490
816,500,835
441,-481,781
-777,-576,568
877,550,821
360,547,-337
-619,-634,-316
-792,444,-468
-654,-587,-369
-563,694,526
431,-445,-432
561,560,-344
-737,-589,626
-814,602,-545
792,659,777
339,-575,795
-658,-721,-412
409,-345,-480
-426,622,488

--- scanner 20 ---
-321,-484,856
-382,624,864
793,652,-446
-551,770,-664
503,-751,547
-367,-458,798
713,-504,-554
-579,-429,-552
658,-746,431
570,575,809
516,439,900
748,611,-339
-331,-559,857
742,-558,-418
788,587,-232
-28,-11,-19
-678,-485,-522
101,-36,130
843,-567,-561
-635,751,-600
-362,541,837
-639,815,-518
589,-700,473
-378,660,691
-461,-519,-563
570,346,818

--- scanner 21 ---
615,648,-826
448,-608,786
492,-212,-487
-451,744,-597
430,726,469
659,646,-733
-535,703,-440
497,-405,-531
-512,923,799
421,-746,762
439,-776,808
-388,975,719
-291,-796,548
-686,-365,-577
-667,-486,-522
569,-398,-468
-328,-670,528
-299,-696,679
-393,792,-427
435,725,448
-734,-453,-639
134,184,-52
-6,10,-73
739,644,-896
-551,979,617
468,679,342

--- scanner 22 ---
-423,-533,-497
339,-570,-565
363,-488,-540
838,-568,766
576,692,-247
65,-52,98
-441,-696,934
-559,636,-368
-24,101,-3
-537,-769,808
561,890,-267
803,-669,913
622,464,805
-615,423,-387
-652,594,547
816,-645,924
-633,566,464
-536,381,-384
-315,-556,-390
-336,-776,821
539,741,-371
-674,656,462
341,-659,-623
752,520,764
803,437,760
-339,-631,-474

--- scanner 23 ---
-336,-643,-390
-464,859,-447
582,-777,-678
629,-609,-650
593,486,801
-402,841,347
544,-661,-800
-300,-473,-332
-413,943,-445
-32,160,109
-515,911,-521
-678,-471,513
420,560,756
-824,-485,374
-770,-473,373
549,580,809
-451,913,466
717,826,-842
-491,928,451
706,825,-821
49,64,-31
-286,-639,-346
657,723,-873
614,-326,604
620,-378,750
689,-414,579

--- scanner 24 ---
419,697,-905
404,-422,284
54,104,34
759,573,738
-677,-582,367
-78,50,-146
-599,642,443
-590,-380,-800
386,-484,-510
685,400,693
334,-535,-584
-644,-699,434
-637,509,-918
-635,646,518
-687,526,398
522,637,-936
-523,-394,-606
317,-511,388
-718,-354,-659
332,-471,403
420,686,-884
-709,581,-817
302,-433,-508
-765,-644,415
-744,475,-802
665,529,746

--- scanner 25 ---
682,-426,453
483,685,535
-509,-552,-750
-558,-407,-712
633,-688,-296
598,-463,-298
-723,-505,-739
771,-493,440
-621,694,569
-466,467,-507
-417,675,-541
-736,716,582
-859,-451,558
-160,-54,13
-891,-317,467
10,81,21
713,-520,460
-807,-455,467
-511,620,-417
-763,566,558
484,533,-490
462,650,-564
465,864,558
437,671,-392
701,-573,-329
343,760,569

--- scanner 26 ---
-375,-914,-601
-343,-596,348
-32,3,-27
666,802,-361
-466,532,692
655,783,-328
415,-469,616
745,-663,-537
-425,-818,-702
-412,-619,440
-479,505,647
-500,589,-646
-672,578,657
334,-477,708
-371,-908,-575
776,-640,-556
795,330,930
-413,638,-803
509,-439,723
-354,596,-621
783,-800,-609
105,35,142
-350,-642,540
674,711,-438
871,349,757
851,271,903

--- scanner 27 ---
666,-773,-788
584,433,806
-836,-645,-731
440,873,-504
-573,740,578
498,875,-593
477,403,712
-634,738,-694
-888,-594,-657
-920,-696,-733
492,441,887
-617,768,-640
-624,-654,562
-692,795,-591
-137,-60,-70
270,-366,426
-63,114,109
-544,686,714
443,-385,350
523,851,-675
496,-809,-846
-443,677,571
297,-307,370
-609,-661,517
-624,-691,621
662,-823,-832

--- scanner 28 ---
-67,-5,71
695,729,-758
395,526,361
391,552,367
545,-715,-680
-430,446,-828
633,-882,-723
-625,-693,786
445,425,457
575,711,-693
534,-747,-734
727,-710,688
-470,-585,-392
820,-563,705
829,-534,691
-416,396,-767
-474,555,-743
-683,-680,826
-725,590,612
-756,571,635
-763,518,475
60,-26,-86
-559,-644,-298
543,841,-753
-646,-754,662
-456,-679,-290

--- scanner 29 ---
876,-580,545
-673,414,290
533,573,-385
571,-475,-784
-476,803,-387
-807,-614,-889
-498,-378,469
465,593,-577
-798,-484,-802
533,716,737
584,-574,-759
-10,135,23
-393,-377,637
-412,-442,550
-301,761,-444
-727,407,319
100,1,-74
-478,762,-533
791,-558,607
874,-539,635
574,846,681
456,-583,-776
-600,431,431
392,560,-442
-784,-521,-887
578,897,764

--- scanner 30 ---
508,-624,450
769,-571,-695
-29,40,5
-647,-712,821
-94,-75,-123
-545,742,-783
683,-574,-545
-731,-637,845
863,555,297
476,-760,396
474,-715,462
835,596,512
-805,-752,-508
718,339,-575
882,633,486
730,305,-668
-904,-723,-599
-753,555,601
883,-545,-552
-734,342,545
82,-118,-40
-695,687,-827
-737,300,624
-698,764,-902
672,298,-548
-815,-823,-645
-624,-614,737

--- scanner 31 ---
-709,-568,-921
664,447,459
-631,-453,714
42,186,-107
528,552,-598
-685,443,-592
575,445,517
561,-209,692
-736,645,711
-376,-430,698
684,-658,-515
-418,-509,695
548,-604,-547
474,582,-615
636,-233,608
493,469,542
-672,-542,-874
-687,682,835
-753,539,-546
538,-317,585
-631,-757,-902
-885,667,815
-550,489,-557
-89,21,-96
639,-592,-513
577,525,-673

--- scanner 32 ---
69,-72,127
-249,-681,425
649,-542,-425
-471,866,-270
-607,548,659
-418,-330,-694
827,377,736
-659,398,574
833,-836,743
790,-704,754
649,-601,-388
862,-632,771
634,-497,-418
-245,-406,-713
-775,520,612
725,325,687
-272,-350,-772
945,753,-383
-369,-675,517
913,677,-485
-637,852,-256
-366,-784,476
828,356,747
861,751,-434
-641,808,-306

--- scanner 33 ---
856,679,766
608,796,-836
779,687,675
571,-487,553
-613,619,738
680,758,-699
616,-362,-950
661,789,-676
889,668,747
642,-358,-944
0,-1,-23
-609,854,796
596,-341,560
-590,716,-485
-662,692,741
515,-412,-854
-815,-461,506
-444,-796,-620
-620,-694,-623
-664,679,-649
-603,658,-525
-473,-787,-606
-790,-414,421
414,-400,602
-833,-592,381

--- scanner 34 ---
511,-880,430
511,-410,-275
-905,-767,543
707,604,-628
-561,760,-442
811,582,-777
-602,697,636
538,780,601
509,-502,-415
6,-49,127
523,-356,-276
-875,-729,-368
-550,710,-645
-803,-778,-249
831,567,-579
-677,724,685
681,-844,488
-873,-665,619
-890,-689,-353
-619,667,582
513,804,683
-596,806,-577
455,802,772
-821,-716,545
677,-894,444

--- scanner 35 ---
-779,-357,810
-800,-349,888
-28,106,81
384,899,467
732,-331,615
460,665,-282
522,923,494
-404,-662,-771
765,-440,-640
725,-394,543
-611,922,-443
-729,-428,740
-317,-573,-667
-817,609,801
334,685,-245
-657,826,-375
-786,506,691
918,-350,538
-332,-613,-652
354,945,485
677,-502,-688
644,-385,-621
-819,574,576
-646,876,-578
434,816,-253"""

REQUIRED_OVERLAPPING_COORDINATES = 12

import copy
import math
from itertools import combinations

def scan_inputs(input):

    scanner_beacon_dict = {}

    for line in input.splitlines():
        if "scanner" in line:
            scanner_id = line.replace('--- scanner ', '').replace(' ---', '')
            scanner_beacon_dict[scanner_id] = []

        elif line == '':
            continue

        else:
            coordinates = line.split(",")
            coordinates = [int(coordinate) for coordinate in coordinates]
            scanner_beacon_dict[scanner_id].append(coordinates)

    return scanner_beacon_dict


def shift_beacon_coordinates(beacon_coordinates, shifts):
    x_shift, y_shift, z_shift = shifts

    new_coordinates = []

    for coordinate in beacon_coordinates:
        new_coordinate = [
            coordinate[0] + x_shift,
            coordinate[1] + y_shift,
            coordinate[2] + z_shift
        ]

        new_coordinates.append(new_coordinate)

    return new_coordinates





def transform_coordinate(point, theta, rotation_axis):
    x,y,z = point
    cos = {
        0: 1,
        90: 0,
        180: -1,
        270: 0
    }
    sin = {
        0:0,
        90:1,
        180:0,
        270:-1
    }


    # cos_theta = math.cos(math.radians(theta))
    # sin_theta = math.sin(math.radians(theta))

    if rotation_axis == "x":
        x_new = copy.deepcopy(x)
        y_new = y*cos[theta] - z*sin[theta]
        z_new = y*sin[theta] + z*cos[theta]

    elif rotation_axis == "y":
        x_new = x*cos[theta] + z*sin[theta]
        y_new = copy.deepcopy(y)
        z_new = z*cos[theta] - x*sin[theta]

    elif rotation_axis == "z":
        x_new = x*cos[theta]- y*sin[theta]
        y_new = x*sin[theta] + y*cos[theta]
        z_new = copy.deepcopy(z)


    return (round(x_new), round(y_new), round(z_new))

def transform_beacon_coordinates(coordinates, theta, rotation_axis):

    new_coordinates = []

    for coordinate in coordinates:

        new_coordinate = transform_coordinate(coordinate, theta, rotation_axis)
        new_coordinates.append(new_coordinate)

    return new_coordinates

def check_overlapping_coordinates(coordinate_list1, coordinate_list2):

    coordinate_list1_hashed = [f"{point[0]},{point[1]},{point[2]}" for point in coordinate_list1]
    coordinate_list2_hashed = [f"{point[0]},{point[1]},{point[2]}" for point in coordinate_list2]

    coordinate_set1 = set(coordinate_list1_hashed)
    coordinate_set2 = set(coordinate_list2_hashed)

    #create set of only overlapping coordinates
    overlapping_coordinates_set = coordinate_set1.intersection(coordinate_set2)

    if len(overlapping_coordinates_set) < REQUIRED_OVERLAPPING_COORDINATES:
        return []

    overlapping_coordinates = []
    for overlapping_coordinate in overlapping_coordinates_set:
        overlapping_coordinate = overlapping_coordinate.split(',')
        overlapping_coordinate = [int(coordinate) for coordinate in overlapping_coordinate]
        overlapping_coordinates.append(overlapping_coordinate)

    return overlapping_coordinates


def look_for_beacon_match(known_scanner_coordinates, analyzed_scanner_coordinates):

    x_shifts_to_check = []
    y_shifts_to_check = []
    z_shifts_to_check = []

    shifts_to_check = []

    for known_beacon_point in known_scanner_coordinates:
        for analyzed_beacon_point in analyzed_scanner_coordinates:
            shifts_to_check.append(
                (
                    known_beacon_point[0] - analyzed_beacon_point[0],
                    known_beacon_point[1] - analyzed_beacon_point[1],
                    known_beacon_point[2] - analyzed_beacon_point[2]
                )
            )
            x_shifts_to_check.append(known_beacon_point[0] - analyzed_beacon_point[0])
            y_shifts_to_check.append(known_beacon_point[1] - analyzed_beacon_point[1])
            z_shifts_to_check.append(known_beacon_point[2] - analyzed_beacon_point[2])



    for shift in shifts_to_check:

        new_scanner_coordinates = shift_beacon_coordinates(analyzed_scanner_coordinates, shift)

        overlapping_coordinates = check_overlapping_coordinates(known_scanner_coordinates, new_scanner_coordinates)
        
        if overlapping_coordinates:
            return shift, overlapping_coordinates, new_scanner_coordinates

    return (), [], []


def iterate_through_all_orientations_to_find_overalps(known_scanner_coordinates, analyzed_scanner_coordinates):

    # iterate through all 24 orientations of analyzed_scanner until 12 overlapping beacons are found
    global_rotations = (
        ("z", 0, "z", "pos"),
        ("y", 90, "x", "pos"),
        ("y", 180, "z", "neg"),
        ("y", 270, "x", "neg"),
        ("x", 90, "y", "neg"),
        ("x", 270, "y", "pos"),
    )

    for global_rotation in global_rotations:
        global_rot_axis, theta, normal_axis, _ = global_rotation

        transformed_coordinates = transform_beacon_coordinates(analyzed_scanner_coordinates, theta, global_rot_axis)

        for local_rotation in (0, 90, 180, 270):

            transformed_coordinates_local = transform_beacon_coordinates(transformed_coordinates, local_rotation, normal_axis)

            csys_shift, overlapping_coordinates, new_scanner_coordinates = look_for_beacon_match(known_scanner_coordinates, transformed_coordinates_local)

            if not overlapping_coordinates:
                print(f"no overlap found for global_rot_axis: {global_rot_axis}, theta: {theta}, normal_axis: {normal_axis}, local_rotation{local_rotation}")
                continue

            return csys_shift, overlapping_coordinates, new_scanner_coordinates 

    return (), [], []


def locate_all_overlapping_coordinates(input):
    
    scanner_beacon_dict = scan_inputs(input)

    scanner_ids = list(scanner_beacon_dict.keys())

    resolved_scanners = ['0']
    all_overlapping_coordinates = []

    discovered_scanner_dict = {'0': scanner_beacon_dict['0']}
    
    # first time overlapping cubes relative to scanner 0 since scanner 0 is the reference frame for other to be based off of
    for scanner_id in scanner_ids:

        # don't compare scanner 0 to itself
        if scanner_id == '0':
            continue
        
        _, overlapping_coordinates, transformed_coordinates = iterate_through_all_orientations_to_find_overalps(scanner_beacon_dict['0'], scanner_beacon_dict[scanner_id])

        if overlapping_coordinates:
            # print(f'0, {scanner_id}')
            all_overlapping_coordinates.extend(overlapping_coordinates)
            resolved_scanners.append(scanner_id)
            discovered_scanner_dict[scanner_id] = transformed_coordinates

    # now search for all other combos of scanners until all are located and found relative to scanner 0
    counter = 0

    # print(discovered_scanner_dict)
    
    known_scanner_ids = list(discovered_scanner_dict.keys())
    unknown_scanner_ids = [scanner_id for scanner_id in scanner_beacon_dict.keys() if scanner_id not in known_scanner_ids]

    checked_combos = []


    while True:

        new_discovered_scanners = []
        # print(f"unknown_scanner_ids{unknown_scanner_ids}")
        # print(f"known_scanner_id{known_scanner_ids}")
        for unknown_scanner_id in unknown_scanner_ids:

            for known_scanner_id in known_scanner_ids:

                # if combo has already been checked, then don't check it again
                if (known_scanner_id, unknown_scanner_id) in checked_combos:
                    continue
                
                #already compared to scanner 0 above
                if known_scanner_id == '0':
                    continue
                
                # print(f"known_scanner_id{known_scanner_id}, unknown_scanner_id{unknown_scanner_id}")
                _, overlapping_coordinates, transformed_coordinates = iterate_through_all_orientations_to_find_overalps(discovered_scanner_dict[known_scanner_id], scanner_beacon_dict[unknown_scanner_id])

                if overlapping_coordinates:
                    # print(f'{known_scanner_id}, {unknown_scanner_id}')
                    print(f"known_scanner_id{known_scanner_id}")
                    print(f"unknown_scanner_id{unknown_scanner_id}")
                    print(overlapping_coordinates)
                    all_overlapping_coordinates.extend(overlapping_coordinates)
                    new_discovered_scanners.append(unknown_scanner_id)
                    discovered_scanner_dict[unknown_scanner_id] = transformed_coordinates
                    checked_combos.append(known_scanner_id, unknown_scanner_id)

        # print(f"new_discovered_scanners {new_discovered_scanners}")
        for new_discovered_scanner in new_discovered_scanners:

            if new_discovered_scanner in unknown_scanner_ids:
                unknown_scanner_ids.remove(new_discovered_scanner)

            if new_discovered_scanner not in known_scanner_ids:
                known_scanner_ids.append(new_discovered_scanner)

        # all scanners located, exit loop
        if len(discovered_scanner_dict.keys()) == len(scanner_beacon_dict.keys()):
            print("all overlaps found")
            break

        counter += 1

        # in case my code is borked
        if counter > 100000:
            break

        # print(new_discovered_scanners)
    
    return all_overlapping_coordinates, discovered_scanner_dict

def get_all_beacons(input):

    all_beacons_hashed = []
    scanner_beacon_dict = scan_inputs(input)

    for beacons in scanner_beacon_dict.values():
        beacons_hashed = [f"{beacon[0]},{beacon[1]},{beacon[2]}" for beacon in beacons]
        all_beacons_hashed.extend(beacons_hashed)
    
    return all_beacons_hashed
        

def total_number_of_beacons(input):

    # all_beacons_hashed = get_all_beacons(input)

    all_overlapping_coordinates, discovered_scanner_dict  = locate_all_overlapping_coordinates(input)

    all_beacons_hashed = []
    for beacons in discovered_scanner_dict.values():
        beacons_hashed = [f"{beacon[0]},{beacon[1]},{beacon[2]}" for beacon in beacons]
        all_beacons_hashed.extend(beacons_hashed)

    
    all_beacons_hashed = list(set(all_beacons_hashed))

    return len(all_beacons_hashed)

    # all_overlapping_coordinates_hashed = [f"{beacon[0]},{beacon[1]},{beacon[2]}" for beacon in all_overlapping_coordinates]





# all_overlapping_coordinates = locate_all_overlapping_coordinates(input)
# print(all_overlapping_coordinates)
# print(len(all_overlapping_coordinates))


qty = total_number_of_beacons(input)

print(qty)



# scanner_beacon_dict = scan_inputs(input)
# _, _, transformed_coordinates = iterate_through_all_orientations_to_find_overalps(scanner_beacon_dict['1'], scanner_beacon_dict["4"])

# print(transformed_coordinates)

# _, overlapping_coordinates, transformed_coordinates = iterate_through_all_orientations_to_find_overalps(transformed_coordinates, scanner_beacon_dict["4"])

# print(len(overlapping_coordinates))